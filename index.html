<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>อัตราค่าปรับหอพัก</title>
  
  <style>
    /* ใช้โทนสีและดีไซน์ตามไฟล์ต้นฉบับ [cite: 13-17] */
    :root {
      --color-primary: #8B4513; /* น้ำตาลเข้ม [cite: 13] */
      --color-secondary: #D2B48C; /* น้ำตาลอ่อน [cite: 14] */
      --color-background: #FFF8E1; /* เหลืองอ่อน [cite: 15] */
      --color-text: #4E342E; /* น้ำตาลเกือบดำ [cite: 16] */
      --color-warning: #FFC107; /* เหลืองเตือน [cite: 34] */
      --color-safe: #4CAF50; /* เขียวปลอดภัย [cite: 17] */
    }
    
    body {
      font-family: 'Sukhumvit Set', 'Kanit', sans-serif; [cite: 18]
      background-color: var(--color-background);
      color: var(--color-text);
      padding: 15px;
      margin: 0;
      text-align: center;
    }
    
    .container {
      max-width: 450px; [cite: 20]
      margin: 0 auto;
      padding: 20px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); [cite: 21]
    }

    h1 { color: var(--color-primary); font-size: 1.8em; margin-bottom: 5px; } [cite: 22]
    h2 { font-size: 1.5em; margin-top: 25px; color: var(--color-primary); border-bottom: 2px solid var(--color-secondary); padding-bottom: 5px; } [cite: 23, 24]

    .date-display { font-size: 1.1em; color: #6D4C41; margin-bottom: 20px; } [cite: 25]
    
    .fine-box { background-color: white; padding: 20px; border-radius: 8px; margin: 25px 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); } [cite: 26, 27]
    .fine-label { font-size: 1.1em; font-weight: 500; margin-bottom: 5px; } [cite: 28]
    .fine-amount { font-size: 3.5em; font-weight: bold; color: #DC3545; line-height: 1; } [cite: 29, 30]
    
    .status-message { padding: 10px; margin-top: 15px; border-radius: 5px; font-weight: bold; font-size: 1.1em; } [cite: 32]
    .status-safe { background-color: var(--color-safe); color: white; } [cite: 33]
    .status-warning { background-color: var(--color-warning); color: var(--color-text); } [cite: 34]

    .fine-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 1em; } [cite: 35]
    .fine-table th, .fine-table td { border: 1px solid var(--color-secondary); padding: 10px 8px; } [cite: 36]
    .fine-table th { background-color: var(--color-primary); color: white; } [cite: 37]
    .fine-table tr:nth-child(even) { background-color: #FBEFDD; } [cite: 38]
    .highlight-row { background-color: var(--color-warning) !important; font-weight: bold; } [cite: 39]
    
    /* Responsive สำหรับมือถือตามต้นฉบับ [cite: 40-52] */
    @media (max-width: 992px) {
      .container { max-width: 85%; }
      h1, h2, .date-display, .fine-label, .status-message, .fine-table { font-size: 3em; }
      .fine-amount { font-size: 6em; }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>อัตราค่าปรับ</h1>
    <div class="date-display" id="current-date"></div>

    <div class="fine-box">
      <div class="fine-label">ค่าปรับที่ต้องชำระในวันนี้ (฿)</div>
      <div class="fine-amount" id="current-fine-amount"></div>
    </div>
    
    <div class="status-message" id="status-message"></div>
    
    <h2>ตารางอ้างอิง</h2>
    <table class="fine-table">
      <thead>
        <tr>
          <th>ชำระภายในวันที่</th>
          <th>ค่าปรับ (บาท)</th>
        </tr>
      </thead>
      <tbody id="reference-table-body"></tbody>
    </table>
  </div>

  <script>
    // รวม Logic การคำนวณจาก Code2.gs มาไว้ที่นี่เพื่อให้รันบน GitHub ได้ [cite: 3-11]
    function getFineData() {
      const today = new Date();
      const todayDate = today.getDate(); // วันที่ปัจจุบัน [cite: 3]
      const fineRate = 50; // อัตราค่าปรับต่อวัน [cite: 3, 4]
      
      let currentFine = 0;
      if (todayDate >= 9) {
        // เริ่มคิดค่าปรับหลังวันที่ 8 [cite: 5, 6]
        currentFine = (todayDate - 8) * fineRate;
      }
      
      const referenceTable = [];
      for (let day = 9; day <= 16; day++) { [cite: 7]
        referenceTable.push({
          day: day,
          fine: (day - 8) * fineRate [cite: 8]
        });
      }

      // จัดรูปแบบวันที่ภาษาไทย [cite: 9, 10]
      const formatter = new Intl.DateTimeFormat('th-TH', { 
        year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'
      });
      
      return {
        formattedDate: formatter.format(today),
        currentFine: currentFine,
        referenceTable: referenceTable
      };
    }

    function displayData() {
      const data = getFineData();
      const todayDate = new Date().getDate();
      
      // แสดงวันที่ [cite: 57]
      document.getElementById('current-date').textContent = `ณ ${data.formattedDate}`;
      
      // แสดงค่าปรับ [cite: 58]
      const fineAmountDisplay = document.getElementById('current-fine-amount');
      fineAmountDisplay.innerHTML = `${data.currentFine.toLocaleString('th-TH')}`;
      
      // แสดงข้อความสถานะ [cite: 59-61]
      const statusMessage = document.getElementById('status-message');
      if (data.currentFine === 0) {
          statusMessage.textContent = 'ชำระวันนี้ ไม่มีค่าปรับค่ะ';
          statusMessage.className = 'status-message status-safe';
      } else {
          statusMessage.textContent = `ชำระวันนี้ มีค่าปรับรวม ${data.currentFine.toLocaleString('th-TH')} บาทค่ะ`;
          statusMessage.className = 'status-message status-warning';
      }

      // แสดงตารางอ้างอิง [cite: 62-64]
      const tableBody = document.getElementById('reference-table-body');
      tableBody.innerHTML = '';
      
      data.referenceTable.forEach(item => {
        const row = tableBody.insertRow();
        if (item.day === todayDate) row.classList.add('highlight-row');
        
        row.insertCell().textContent = item.day;
        row.insertCell().textContent = item.fine.toLocaleString('th-TH');
      });
    }

    // เริ่มทำงานเมื่อโหลดหน้าเว็บ
    document.addEventListener("DOMContentLoaded", displayData);
  </script>
</body>
</html>
